### 简介

```js
$ npm i -D url-loader
```


```js
// webpack.config.js
const path = require("path");

module.exports = {
  entry: "./src/index.js",
  output: {
    filename: "build.js", // 打包结果的文件名称
    path: path.resolve(__dirname, "dist"), // 路径，只能是绝对路径
  },
  module: {
    rules: [
      // {
      //   test: /\.css$/, // 一般就是一个正则表达式，用于匹配要处理的文件类型, \是转移， $表示结尾
      //   use: [
      //     {
      //       loader: "css-loader", // 表示要用的loader
      //       // options: // 字符串或着对象，可选参数，用户传进来特定的配置参数
      //       // query: // webpack5 里已经合并到options里面了
      //     },
      //   ],
      // },
      // {
      //   test: /\.css$/,
      //   loader: 'css-loader'
      // },    // 上面的简写，只有一个loader，且没有什么配置参数，完全可以简写
      {
        test: /\.css$/,
        use: [
          "style-loader",
          {
            loader: "css-loader",
            options: {
              importLoaders: 1, // css-loader处理过程中，发现有其它css文件时，向前找一个loader（postcss-loader），如果想找更多的就增加数字
              esModule: false, // 否则加载背景图片失败
            },
          },
          "postcss-loader",
        ], // 执行顺序是从后向前
      }, // 另一种简写形式，有多个loader，并且不需要配置参数
      {
        test: /\.less$/,
        // 因为配置文件提取到了 postcss.config.js 中（0005.md），所以 "postcss-loader" 直接写在这就可以了
        use: ["style-loader", "css-loader", "postcss-loader", "less-loader"], // 执行顺序是从后向前
      },
      {
        test: /\.(png|svg|gif|jpe?g)$/, // 小括号中间表示 或 的关系，？表示 e 可有可无
        user: [
          {
            loader: "url-loader",
            /**
             * 常见的占位符
             *
             * 打包前后一样
             *
             * [ext]: 扩展名，文件的后缀
             * [name]: 文件名称
             * [hash]: 结合文件内容生成一个哈希值
             * [contentHash]: 和 hash 一样，在其它地方可能不一样
             * [hash:<length>]: hash 生成的文件名太长了，自己选择一个长度
             * [path]: 文件路径，webpack中不常用
             */
            // options: {
            //   name: '[name].[hash:6].[ext]',  // 打包图片的名称
            //   outputPath: 'img'   // 输出到 dist/img 目录里
            // }
            options: {
              name: "img/[name].[hash:6].[ext]", // 上面的简写
            },
          },
        ],
      },
    ],
  },
};
```


### 对比file-loader

- file-loader

将资源拷贝到指定目录，请求次数多

- url-loader 

把要打包的图片资源，以base64 uri 的形式加载到代码中

好处：减少了请求次数，因为打包都放到main.js了，减少请求次数

坏处：如果图片很大，最后导致 main.js 很大，如果是首屏渲染，就很慢了


### 最佳实践

url-loader 内部也可以调用 file-loader

什么时候调用呢？-- limit

```js
// webpack.config.js
const path = require("path");

module.exports = {
  entry: "./src/index.js",
  output: {
    filename: "build.js", // 打包结果的文件名称
    path: path.resolve(__dirname, "dist"), // 路径，只能是绝对路径
  },
  module: {
    rules: [
      // {
      //   test: /\.css$/, // 一般就是一个正则表达式，用于匹配要处理的文件类型, \是转移， $表示结尾
      //   use: [
      //     {
      //       loader: "css-loader", // 表示要用的loader
      //       // options: // 字符串或着对象，可选参数，用户传进来特定的配置参数
      //       // query: // webpack5 里已经合并到options里面了
      //     },
      //   ],
      // },
      // {
      //   test: /\.css$/,
      //   loader: 'css-loader'
      // },    // 上面的简写，只有一个loader，且没有什么配置参数，完全可以简写
      {
        test: /\.css$/,
        use: [
          "style-loader",
          {
            loader: "css-loader",
            options: {
              importLoaders: 1, // css-loader处理过程中，发现有其它css文件时，向前找一个loader（postcss-loader），如果想找更多的就增加数字
              esModule: false, // 否则加载背景图片失败
            },
          },
          "postcss-loader",
        ], // 执行顺序是从后向前
      }, // 另一种简写形式，有多个loader，并且不需要配置参数
      {
        test: /\.less$/,
        // 因为配置文件提取到了 postcss.config.js 中（0005.md），所以 "postcss-loader" 直接写在这就可以了
        use: ["style-loader", "css-loader", "postcss-loader", "less-loader"], // 执行顺序是从后向前
      },
      {
        test: /\.(png|svg|gif|jpe?g)$/, // 小括号中间表示 或 的关系，？表示 e 可有可无
        user: [
          {
            loader: "url-loader",
            /**
             * 常见的占位符
             *
             * 打包前后一样
             *
             * [ext]: 扩展名，文件的后缀
             * [name]: 文件名称
             * [hash]: 结合文件内容生成一个哈希值
             * [contentHash]: 和 hash 一样，在其它地方可能不一样
             * [hash:<length>]: hash 生成的文件名太长了，自己选择一个长度
             * [path]: 文件路径，webpack中不常用
             */
            // options: {
            //   name: '[name].[hash:6].[ext]',  // 打包图片的名称
            //   outputPath: 'img'   // 输出到 dist/img 目录里
            // }
            options: {
              name: "img/[name].[hash:6].[ext]", // 上面的简写
              limit: 25 * 1024  // 超过 25kb 就拷贝，否者就 base64 转一下
            },
          },
        ],
      },
    ],
  },
};
```